(this["webpackJsonpcurrency-view"]=this["webpackJsonpcurrency-view"]||[]).push([[0],{132:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},172:function(e,t,a){e.exports=a(364)},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},361:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){},364:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(50),o=a.n(c),l=(a(177),a(132)),u=a.n(l),i=(a(178),function(e){var t=e.children;return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:u.a,className:"header__logo",alt:"CurrencyView logo"}),r.a.createElement("div",{className:"header__title"},"Currencies view"),t)}),s=a(12),m=a(81),f=a(19),d=a(143),h=(a(179),function(e){var t=e.data,a=e.fields,n=e.maxRows;return r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,a.map((function(e){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,t.slice(0,n).map((function(e){return r.a.createElement("tr",{key:e[a[0]]},a.map((function(t){return r.a.createElement("td",{key:e[a[0]]+t},e[t])})))}))))}),E=a(9),v=function(e){var t=e.x,a=e.y,n=e.textColor,c=e.payload;return r.a.createElement("g",{transform:"translate(".concat(t,",").concat(a,")")},r.a.createElement("text",{x:0,y:0,dy:16,textAnchor:"end",fill:n,transform:"rotate(-45)"},c.value))},p=function(e){var t=e.data,a=e.xAxisDataKey;return r.a.createElement(E.e,{width:"80%",height:350},r.a.createElement(E.d,{data:t},r.a.createElement(E.g,{dataKey:a,height:80,tick:r.a.createElement(v,{textColor:"#666"})}),r.a.createElement(E.h,null),r.a.createElement(E.a,{stroke:"#666",strokeDasharray:"3 3"}),r.a.createElement(E.c,{type:"monotone",dataKey:"usd",stroke:"#8884d8"}),r.a.createElement(E.c,{type:"monotone",dataKey:"eur",stroke:"#82ca9d"}),r.a.createElement(E.f,null),r.a.createElement(E.b,{layout:"vertical",align:"right",verticalAlign:"middle"})))},b=a(80),y=a.n(b),g=a(142),k=function(e){var t=e.date,a=e.rates,n=e.base.toLowerCase();return t?Object(s.a)({},t,Object(s.a)({},n,a.RUB)):Object.keys(a).reduce((function(e,t){return Object(f.a)(Object(f.a)({},e),{},Object(s.a)({},t,Object(s.a)({},n,a[t].RUB)))}),{})},j=function(){var e=Object(g.a)(y.a.mark((function e(t,a){var n,r,c,o,l,u,i=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>2&&void 0!==i[2]?i[2]:"",!t||!t.length){e.next=15;break}return r="latest",a&&(r="".concat(a,"..").concat(n)),c="https://api.frankfurter.app/".concat(r,"?to=RUB"),o=t.map((function(e){return fetch(c+"&from=".concat(e),{method:"GET"})})),e.next=8,Promise.all(o);case 8:return l=e.sent,e.next=11,Promise.all(l.map((function(e){return e.json()})));case 11:return u=e.sent,e.abrupt("return",w(u.map(k),t));case 15:return e.abrupt("return",Promise.reject(new Error("currency collection is not defined")));case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(e,t){var a=e.shift();return a&&e.forEach((function(e,n){var r=t[n+1].toLowerCase();Object.keys(a).forEach((function(t){return a[t][r]=e[t][r]}))})),a},O=(a(361),function(e){var t=e.currencies,a=Object(n.useState)({data:{}}),c=Object(d.a)(a,2),o=c[0],l=c[1];Object(n.useEffect)((function(){var e=setInterval((function(){j(t).then((function(e){Object.keys(e)[0]in o.data||l((function(t){var a=t.data;return{data:Object(f.a)(Object(f.a)({},a),e)}}))})).catch((function(e){return console.error(e.message)}))}),parseInt("60000"));return function(){return clearInterval(e)}}),[t]);var u=Object.keys(o.data);if(u.length>0){var i=["date"].concat(Object(m.a)(t)),E=u.map((function(e){return Object(f.a)(Object(s.a)({},i[0],e),o.data[e])}));return r.a.createElement("div",{className:"currencyView"},r.a.createElement(h,{fields:i,data:Object(m.a)(E).reverse(),maxRows:5}),r.a.createElement(p,{xAxisDataKey:i[0],data:E}))}return r.a.createElement("div",null,"No data. Please wait for updates...")}),x=(a(362),function(e){var t=e.children;return r.a.createElement("footer",{className:"footer"},t,r.a.createElement("a",{className:"footer__link",href:"https://github.com/vdmkrchkn",target:"_blank",rel:"noopener noreferrer"},"See my repos at github"))}),N=(a(363),function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i,null),r.a.createElement(O,{currencies:["usd","eur"]}),r.a.createElement(x,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[172,1,2]]]);
//# sourceMappingURL=main.5d6e24e7.chunk.js.map